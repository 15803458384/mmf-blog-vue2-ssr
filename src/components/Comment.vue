<template>
    <div class="card">
        <div class="comments" data-comment-type="Answer" data-comment-id="37833">
            <div class="comment-post-wrap"> <img src="http://i1.zdimg.com//assets/icons/avatar-big-placeholder.jpg@1e_50w_50h_1c_0i_0o_100Q_1x.jpg" alt="" class="avatar-img">
                <div class="comment-post-input-wrap base-textarea-wrap">
                    <textarea class="textarea-input base-input" cols="30" rows="4"></textarea>
                </div>
                <div class="comment-post-actions clearfix">
                    <a href="javascript:;" class="btn btn-blue">发表评论</a>
                </div>
            </div>
            <div class="comment-items-wrap" data-comment="CommentList">
                <div class="comment-item">
                    <a data-hover="user" href="http://www.naitang.com/people/zhangyajing85" class="comment-author-avatar-link">
                        <img src="http://i1.zdimg.com/avatar/f7/575f7516c8f35.jpg@1e_50w_1c_0i_0o_100Q_1x.jpg" alt="" class="avatar-img">
                    </a>
                    <div class="comment-content-wrap">
                        <span class="comment-author-wrap">
                            <a data-hover="user" href="http://www.naitang.com/people/zhangyajing85" class="comment-author">张雅静</a>
                        </span>
                        <div class="comment-content">那个趣味眼线！！！第三张图还挺可爱的！</div>
                        <div class="comment-footer">
                            <span class="comment-likes-count hidden"><b data-agreeid="242785">0</b> 赞</span>
                            <span class="comment-time">1 周前</span>
                            <a href="javascript:;" class="comment-action-item comment-reply">回复</a>
                        </div>
                    </div>
                </div>
                <div class="comment-item">
                    <a data-hover="user" href="http://www.naitang.com/people/zhangyajing85" class="comment-author-avatar-link">
                        <img src="http://i1.zdimg.com/avatar/f7/575f7516c8f35.jpg@1e_50w_1c_0i_0o_100Q_1x.jpg" alt="" class="avatar-img">
                    </a>
                    <div class="comment-content-wrap">
                        <span class="comment-author-wrap">
                            <a data-hover="user" href="http://www.naitang.com/people/zhangyajing85" class="comment-author">张雅静</a>
                        </span>
                        <div class="comment-content">那个趣味眼线！！！第三张图还挺可爱的！</div>
                        <div class="comment-footer">
                            <span class="comment-likes-count hidden"><b data-agreeid="242785">0</b> 赞</span>
                            <span class="comment-time">1 周前</span>
                            <a href="javascript:;" class="comment-action-item comment-reply">回复</a>
                        </div>
                    </div>
                </div>
                <div class="comment-item">
                    <a data-hover="user" href="http://www.naitang.com/people/zhangyajing85" class="comment-author-avatar-link">
                        <img src="http://i1.zdimg.com/avatar/f7/575f7516c8f35.jpg@1e_50w_1c_0i_0o_100Q_1x.jpg" alt="" class="avatar-img">
                    </a>
                    <div class="comment-content-wrap">
                        <span class="comment-author-wrap">
                            <a data-hover="user" href="http://www.naitang.com/people/zhangyajing85" class="comment-author">张雅静</a>
                        </span>
                        <div class="comment-content">那个趣味眼线！！！第三张图还挺可爱的！</div>
                        <div class="comment-footer">
                            <span class="comment-likes-count hidden"><b data-agreeid="242785">0</b> 赞</span>
                            <span class="comment-time">1 周前</span>
                            <a href="javascript:;" class="comment-action-item comment-reply">回复</a>
                        </div>
                    </div>
                </div>
                <div class="comment-item">
                    <a data-hover="user" href="http://www.naitang.com/people/zhangyajing85" class="comment-author-avatar-link">
                        <img src="http://i1.zdimg.com/avatar/f7/575f7516c8f35.jpg@1e_50w_1c_0i_0o_100Q_1x.jpg" alt="" class="avatar-img">
                    </a>
                    <div class="comment-content-wrap">
                        <span class="comment-author-wrap">
                            <a data-hover="user" href="http://www.naitang.com/people/zhangyajing85" class="comment-author">张雅静</a>
                        </span>
                        <div class="comment-content">那个趣味眼线！！！第三张图还挺可爱的！</div>
                        <div class="comment-footer">
                            <span class="comment-likes-count hidden"><b data-agreeid="242785">0</b> 赞</span>
                            <span class="comment-time">1 周前</span>
                            <a href="javascript:;" class="comment-action-item comment-reply">回复</a>
                        </div>
                    </div>
                </div>
                <div class="comment-item">
                    <a data-hover="user" href="http://www.naitang.com/people/zhangyajing85" class="comment-author-avatar-link">
                        <img src="http://i1.zdimg.com/avatar/f7/575f7516c8f35.jpg@1e_50w_1c_0i_0o_100Q_1x.jpg" alt="" class="avatar-img">
                    </a>
                    <div class="comment-content-wrap">
                        <span class="comment-author-wrap">
                            <a data-hover="user" href="http://www.naitang.com/people/zhangyajing85" class="comment-author">张雅静</a>
                        </span>
                        <div class="comment-content">那个趣味眼线！！！第三张图还挺可爱的！</div>
                        <div class="comment-footer">
                            <span class="comment-likes-count hidden"><b data-agreeid="242785">0</b> 赞</span>
                            <span class="comment-time">1 周前</span>
                            <a href="javascript:;" class="comment-action-item comment-reply">回复</a>
                        </div>
                    </div>
                </div>
                <div class="comment-item">
                    <a data-hover="user" href="http://www.naitang.com/people/zhangyajing85" class="comment-author-avatar-link">
                        <img src="http://i1.zdimg.com/avatar/f7/575f7516c8f35.jpg@1e_50w_1c_0i_0o_100Q_1x.jpg" alt="" class="avatar-img">
                    </a>
                    <div class="comment-content-wrap">
                        <span class="comment-author-wrap">
                            <a data-hover="user" href="http://www.naitang.com/people/zhangyajing85" class="comment-author">张雅静</a>
                        </span>
                        <div class="comment-content">那个趣味眼线！！！第三张图还挺可爱的！</div>
                        <div class="comment-footer">
                            <span class="comment-likes-count hidden"><b data-agreeid="242785">0</b> 赞</span>
                            <span class="comment-time">1 周前</span>
                            <a href="javascript:;" class="comment-action-item comment-reply">回复</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="load-more-wrap">
                <a href="javascript:;" class="comments-load-more">加载更多</a>
            </div>
        </div>
    </div>
</template>

<script lang="babel">
import { mapGetters } from 'vuex'
export default {
    computed: {
        ...mapGetters({
            comments: 'frontend/getComment'
        })
    },
    data () {
        return {
            form: {
                username: '',
                content: ''
            }
        }
    },
    methods: {
        loadcomment() {
            this.$store.dispatch(`frontend/getComment`, {
                page: this.comments.page + 1,
                limit: 5
            })
        },
        postComment() {
            if (this.form.content === '') {
                this.$store.dispatch('showMsg', '请输入评论内容!')
            } else {
                this.$store.dispatch('frontend/postComment', {
                    id: this.$route.params.id,
                    content: this.form.content,
                    username: this.form.username
                }).then(({code}) => {
                    if (code === 200) {
                        this.form.content = ''
                        this.form.username = ''
                        this.$store.dispatch('showMsg', {
                            content: '评论发布成功!',
                            type: 'success'
                        })
                    }
                })
            }
        },
        reply(item) {
            this.form.content = '回复 @'+ item.username + ': '
            document.querySelector("#content").focus()
        }
    }
}
</script>
